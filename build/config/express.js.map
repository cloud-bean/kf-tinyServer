{"version":3,"sources":["../../src/config/express.js"],"names":["wechatRoute","require","adminRoute","weappRoute","express","bodyParser","swig","module","exports","app","use","urlencoded","extended","json","static","all","req","res","next","header","method","send"],"mappings":"AAAA,MAAMA,cAAcC,QAAQ,gCAAR,CAApB;AACA,MAAMC,aAAaD,QAAQ,+BAAR,CAAnB;AACA,MAAME,aAAaF,QAAQ,+BAAR,CAAnB;;AAEA;AACA,MAAMG,UAAUH,QAAQ,SAAR,CAAhB;AACA,MAAMI,aAAaJ,QAAQ,aAAR,CAAnB;AACA,MAAMK,OAAOL,QAAQ,MAAR,CAAb;;AAGAM,OAAOC,OAAP,GAAiB,MAAM;AACrB,QAAMC,MAAML,SAAZ;AACA;AACA;AACA;AACAK,MAAIC,GAAJ,CAAQL,WAAWM,UAAX,CAAsB;AAC5BC,cAAU;AADkB,GAAtB,CAAR;AAGAH,MAAIC,GAAJ,CAAQL,WAAWQ,IAAX,EAAR;AACAJ,MAAIC,GAAJ,CAAQN,QAAQU,MAAR,CAAe,QAAf,CAAR;AACAL,MAAIM,GAAJ,CAAQ,GAAR,EAAa,UAAUC,GAAV,EAAeC,GAAf,EAAoBC,IAApB,EAA0B;AACrCD,QAAIE,MAAJ,CAAW,6BAAX,EAA0C,GAA1C;AACAF,QAAIE,MAAJ,CAAW,8BAAX,EAA2C,yFAA3C;AACAF,QAAIE,MAAJ,CAAW,8BAAX,EAA2C,iCAA3C;;AAEA,QAAIH,IAAII,MAAJ,KAAe,SAAnB,EAA8B;AAC5BH,UAAII,IAAJ,CAAS,GAAT;AACD,KAFD,MAGK;AACHH;AACD;AACF,GAXD;;AAaAT,MAAIC,GAAJ,CAAQ,SAAR,EAAmBV,WAAnB;AACAS,MAAIC,GAAJ,CAAQ,QAAR,EAAkBR,UAAlB;AACAO,MAAIC,GAAJ,CAAQ,QAAR,EAAkBP,UAAlB;AACA;;AAEA,SAAOM,GAAP;AACD,CA7BD","file":"express.js","sourcesContent":["const wechatRoute = require('../routes/wechat.server.routes');\nconst adminRoute = require('../routes/admin.server.routes');\nconst weappRoute = require('../routes/weapp.server.routes');\n\n// const frontendRoute = require('../routes/frontend.server.routes');\nconst express = require('express');\nconst bodyParser = require('body-parser');\nconst swig = require('swig');\n\n\nmodule.exports = () => {\n  const app = express();\n  // app.engine('html', swig.renderFile);\n  // app.set('view engine', 'html');\n  // app.set('views', './dist');\n  app.use(bodyParser.urlencoded({\n    extended: true,\n  }));\n  app.use(bodyParser.json());\n  app.use(express.static('public'));\n  app.all('*', function (req, res, next) {\n    res.header('Access-Control-Allow-Origin', '*');\n    res.header('Access-Control-Allow-Headers', 'Content-Type, Content-Length, Authorization, Accept, X-Requested-With , yourHeaderFeild');\n    res.header('Access-Control-Allow-Methods', 'PUT, POST, GET, DELETE, OPTIONS');\n\n    if (req.method === 'OPTIONS') {\n      res.send(200);\n    }\n    else {\n      next();\n    }\n  });\n\n  app.use('/wechat', wechatRoute);\n  app.use('/admin', adminRoute);\n  app.use('/weapp', weappRoute);\n  // app.use('/frontend', frontendRoute);\n\n  return app;\n};\n"]}