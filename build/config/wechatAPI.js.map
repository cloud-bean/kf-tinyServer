{"version":3,"sources":["../../src/config/wechatAPI.js"],"names":["config","require","WechatAPI","OAuth","WeappAPI","fs","appid","wechatConfig","appid_test","appsecret","appsecret_test","weappid","weappConfig","weappSecret","process","env","NODE_ENV","webapi","api","weappApi","module","exports"],"mappings":"AAAA,MAAMA,SAASC,QAAQ,UAAR,CAAf;AACA;AACA,MAAMC,YAAYD,QAAQ,YAAR,CAAlB;AACA,MAAME,QAAQF,QAAQ,cAAR,CAAd;AACA,OAAOG,QAAP,MAAqB,0BAArB;AACA;AACA,MAAMC,KAAKJ,QAAQ,IAAR,CAAX;;AAEA;AACA;AACA;;AAEA,IAAIK,QAAQN,OAAOO,YAAP,CAAoBC,UAAhC;AACA,IAAIC,YAAYT,OAAOO,YAAP,CAAoBG,cAApC;AACA,IAAIC,UAAUX,OAAOY,WAAP,CAAmBN,KAAjC;AACA,IAAIO,cAAcb,OAAOY,WAAP,CAAmBH,SAArC;;AAEA,IAAIK,QAAQC,GAAR,CAAYC,QAAZ,KAAyB,YAA7B,EAA2C;AACzCV,UAAQN,OAAOO,YAAP,CAAoBD,KAA5B;AACAG,cAAYT,OAAOO,YAAP,CAAoBE,SAAhC;AACD;;AAED,MAAMQ,SAAS,IAAId,KAAJ,CAAUG,KAAV,EAAiBG,SAAjB,CAAf;AACA,MAAMS,MAAM,IAAIhB,SAAJ,CAAcI,KAAd,EAAqBG,SAArB,CAAZ;AACA,MAAMU,WAAW,IAAIf,QAAJ,CAAaO,OAAb,EAAsBE,WAAtB,CAAjB;;AAGA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEAO,OAAOC,OAAP,GAAiB;AACfH,KADe;AAEfD,QAFe;AAGfE;AAHe,CAAjB","file":"wechatAPI.js","sourcesContent":["const config = require('./config');\n// const fs = require('fs');\nconst WechatAPI = require('wechat-api');\nconst OAuth = require('wechat-oauth');\nimport WeappAPI from '../helper/weappAPIHelper'\n// const qiniu = require(\"qiniu\");\nconst fs = require('fs');\n\n//需要填写你的 Access Key 和 Secret Key\n// qiniu.conf.ACCESS_KEY = 'yH-npgsHSAiumj2uWD4ssIPEdRta5HEsRUCLNFl2';\n// qiniu.conf.SECRET_KEY = 'g-OqPh0BU3NJTV-52iJbeblrUYLPty0XIfmRuBG9';\n\nlet appid = config.wechatConfig.appid_test;\nlet appsecret = config.wechatConfig.appsecret_test;\nlet weappid = config.weappConfig.appid;\nlet weappSecret = config.weappConfig.appsecret;\n\nif (process.env.NODE_ENV === 'production') {\n  appid = config.wechatConfig.appid;\n  appsecret = config.wechatConfig.appsecret;\n}\n\nconst webapi = new OAuth(appid, appsecret);\nconst api = new WechatAPI(appid, appsecret);\nconst weappApi = new WeappAPI(weappid, weappSecret);\n\n\n// const api = new WechatAPI(appid, appsecret, function (callback) {\n//   // 传入一个获取全局token的方法\n//   console.log('read!!');\n//   fs.readFile('access_token.txt', 'utf8', function (err, txt) {\n//     if (err) {return callback(err);}\n//     callback(null, JSON.parse(txt));\n//   });\n// }, function (token, callback) {\n//   // 请将token存储到全局，跨进程、跨机器级别的全局，比如写到数据库、redis等\n//   // 这样才能在cluster模式及多机情况下使用，以下为写入到文件的示例\n//   console.log('write!!');\n//   fs.writeFile('access_token.txt', JSON.stringify(token), callback);\n// });\n\nmodule.exports = {\n  api,\n  webapi,\n  weappApi\n};\n"]}