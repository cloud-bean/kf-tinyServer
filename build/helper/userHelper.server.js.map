{"version":3,"sources":["../../src/helper/userHelper.server.js"],"names":[],"mappings":"AAAA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;AAGA;AACA;AACA;AACA","file":"userHelper.server.js","sourcesContent":["// const wechatAPI = require('../config/wechatAPI');\n// const mongoose = require('mongoose');\n// const User = mongoose.model('User');\n\n// // 当接收到用户发来的消息时，判断数据库中是否有用户信息，若无，则根据openid从微信服务器获取\n// function getUserInfoByOpenId(openid) {\n//   return new Promise((resolve, reject) => {\n//     User.find({ openid }).exec()\n//     .then((users) => {\n//       if (users.length === 0) {\n//         wechatAPI.getUser(openid, (err, userInfo) => {\n//           const user = new User(userInfo);\n//           user.save(err1 => {\n//             if (err1) reject(err1);\n//             resolve(user);\n//           });\n//         });\n//       } else {\n//         resolve(users[0]);\n//       }\n//     })\n//     .catch(err => {\n//       reject(err);\n//     });\n//   });\n// }\n\n// function getAllUserRank() {\n//   return new Promise((resolve, reject) => {\n//     User.find()\n//     .sort('-keepdays')\n//     .exec()\n//     .then((users) => {\n//       resolve(users);\n//     })\n//     .catch(err => {\n//       reject(err);\n//     });\n//   });\n// }\n\n\n// module.exports = {\n//   getAllUserRank,\n//   getUserInfoByOpenId,\n// };\n"]}