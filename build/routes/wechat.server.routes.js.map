{"version":3,"sources":["../../src/routes/wechat.server.routes.js"],"names":["wechatController","require","express","wechat","wechatConfig","router","Router","use","token","text","handleText","voice","handleVoice","image","handleImage","event","handleEvent","middlewarify","req","res","reply","module","exports"],"mappings":"AAAA,MAAMA,mBAAmBC,QAAQ,6CAAR,CAAzB;AACA,MAAMC,UAAUD,QAAQ,SAAR,CAAhB;AACA,MAAME,SAASF,QAAQ,QAAR,CAAf;AACA,MAAMG,eAAeH,QAAQ,kBAAR,EAA4BG,YAAjD;AACA;AACA,MAAMC,SAASH,QAAQI,MAAR,EAAf;;AAGA;AACA;AACA;AACA;AACA;AACA;AACA;AACAD,OAAOE,GAAP,CAAW,GAAX,EAAgBJ,OAAOC,aAAaI,KAApB,EACXC,IADW,CACNT,iBAAiBU,UADX,EAEXC,KAFW,CAELX,iBAAiBY,WAFZ,EAGXC,KAHW,CAGLb,iBAAiBc,WAHZ,EAIXC,KAJW,CAILf,iBAAiBgB,WAJZ,EAKXC,YALW,EAAhB,EAMI,CAACC,GAAD,EAAMC,GAAN,KAAc;AACZA,QAAIC,KAAJ,CAAU,EAAV;AACD,CARL;;AAYAC,OAAOC,OAAP,GAAiBjB,MAAjB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"wechat.server.routes.js","sourcesContent":["const wechatController = require('../controllers/wechat.server.controllers.js');\nconst express = require('express');\nconst wechat = require('wechat');\nconst wechatConfig = require('../config/config').wechatConfig;\n/* eslint-disable*/\nconst router = express.Router();\n\n\n/* eslint-enable*/\n// router.use('/', wechat(wechatConfig,\n//\n//   function(req,res,next){\n//     next();\n//   }\n// ));\nrouter.use('/', wechat(wechatConfig.token)\n    .text(wechatController.handleText)\n    .voice(wechatController.handleVoice)\n    .image(wechatController.handleImage)\n    .event(wechatController.handleEvent)\n    .middlewarify(),\n    (req, res) => {\n      res.reply('');\n    }\n);\n\n\nmodule.exports = router;\n// .image(function (message, req, res, next) {\n//   // message为图片内容\n//   // { ToUserName: 'gh_d3e07d51b513',\n//   // FromUserName: 'oPKu7jgOibOA-De4u8J2RuNKpZRw',\n//   // CreateTime: '1359124971',\n//   // MsgType: 'image',\n//   // PicUrl: 'http://mmsns.qpic.cn/mmsns/bfc815ygvIWcaaZlEXJV7NzhmA3Y2fc4eBOxLjpPI60Q1Q6ibYicwg/0',\n//   // MediaId: 'media_id',\n//   // MsgId: '5837397301622104395' }\n// })\n\n// message为音频内容\n// { ToUserName: 'gh_d3e07d51b513',\n// FromUserName: 'oPKu7jgOibOA-De4u8J2RuNKpZRw',\n// CreateTime: '1359125022',\n// MsgType: 'voice',\n// MediaId: 'OMYnpghh8fRfzHL8obuboDN9rmLig4s0xdpoNT6a5BoFZWufbE6srbCKc_bxduzS',\n// Format: 'amr',\n// MsgId: '5837397520665436492' }\n\n// .video(function (message, req, res, next) {\n//   // message为视频内容\n//   // { ToUserName: 'gh_d3e07d51b513',\n//   // FromUserName: 'oPKu7jgOibOA-De4u8J2RuNKpZRw',\n//   // CreateTime: '1359125022',\n//   // MsgType: 'video',\n//   // MediaId: 'OMYnpghh8fRfzHL8obuboDN9rmLig4s0xdpoNT6a5BoFZWufbE6srbCKc_bxduzS',\n//   // ThumbMediaId: 'media_id',\n//   // MsgId: '5837397520665436492' }\n// })\n// .shortvideo(function (message, req, res, next) {\n//   // message为短视频内容\n//   // { ToUserName: 'gh_d3e07d51b513',\n//   // FromUserName: 'oPKu7jgOibOA-De4u8J2RuNKpZRw',\n//   // CreateTime: '1359125022',\n//   // MsgType: 'shortvideo',\n//   // MediaId: 'OMYnpghh8fRfzHL8obuboDN9rmLig4s0xdpoNT6a5BoFZWufbE6srbCKc_bxduzS',\n//   // ThumbMediaId: 'media_id',\n//   // MsgId: '5837397520665436492' }\n// })\n// .location(function (message, req, res, next) {\n//   // message为位置内容\n//   // { ToUserName: 'gh_d3e07d51b513',\n//   // FromUserName: 'oPKu7jgOibOA-De4u8J2RuNKpZRw',\n//   // CreateTime: '1359125311',\n//   // MsgType: 'location',\n//   // Location_X: '30.283950',\n//   // Location_Y: '120.063139',\n//   // Scale: '15',\n//   // Label: {},\n//   // MsgId: '5837398761910985062' }\n// })\n// .link(function (message, req, res, next) {\n//   // message为链接内容\n//   // { ToUserName: 'gh_d3e07d51b513',\n//   // FromUserName: 'oPKu7jgOibOA-De4u8J2RuNKpZRw',\n//   // CreateTime: '1359125022',\n//   // MsgType: 'link',\n//   // Title: '公众平台官网链接',\n//   // Description: '公众平台官网链接',\n//   // Url: 'http://1024.com/',\n//   // MsgId: '5837397520665436492' }\n// })\n\n// message为事件内容\n// { ToUserName: 'gh_d3e07d51b513',\n// FromUserName: 'oPKu7jgOibOA-De4u8J2RuNKpZRw',\n// CreateTime: '1359125022',\n// MsgType: 'event',\n// Event: 'LOCATION',\n// Latitude: '23.137466',\n// Longitude: '113.352425',\n// Precision: '119.385040',\n// MsgId: '5837397520665436492' }\n// .device_text(function (message, req, res, next) {\n//   // message为设备文本消息内容\n//   // { ToUserName: 'gh_d3e07d51b513',\n//   // FromUserName: 'oPKu7jgOibOA-De4u8J2RuNKpZRw',\n//   // CreateTime: '1359125022',\n//   // MsgType: 'device_text',\n//   // DeviceType: 'gh_d3e07d51b513'\n//   // DeviceID: 'dev1234abcd',\n//   // Content: 'd2hvc3lvdXJkYWRkeQ==',\n//   // SessionID: '9394',\n//   // MsgId: '5837397520665436492',\n//   // OpenID: 'oPKu7jgOibOA-De4u8J2RuNKpZRw' }\n// }).device_event(function (message, req, res, next) {\n//   // message为设备事件内容\n//   // { ToUserName: 'gh_d3e07d51b513',\n//   // FromUserName: 'oPKu7jgOibOA-De4u8J2RuNKpZRw',\n//   // CreateTime: '1359125022',\n//   // MsgType: 'device_event',\n//   // Event: 'bind'\n//   // DeviceType: 'gh_d3e07d51b513'\n//   // DeviceID: 'dev1234abcd',\n//   // OpType : 0, //Event为subscribe_status/unsubscribe_status时存在\n//   // Content: 'd2hvc3lvdXJkYWRkeQ==', //Event不为subscribe_status/unsubscribe_status时存在\n//   // SessionID: '9394',\n//   // MsgId: '5837397520665436492',\n//   // OpenID: 'oPKu7jgOibOA-De4u8J2RuNKpZRw' }\n// })\n"]}