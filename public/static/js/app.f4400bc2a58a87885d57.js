webpackJsonp([2,0],{0:function(e,t,n){"use strict";function o(e){return e&&e.__esModule?e:{"default":e}}var a=n(146),s=o(a),r=n(451),i=o(r),c=n(458),u=o(c),d=n(457),l=o(d),p=n(455),f=o(p),v=n(454),h=o(v),b=n(456),x=o(b),_=n(453),m=o(_);s["default"].use(u["default"]),s["default"].use(l["default"]),s["default"].directive("echarts",n(168));var g=new u["default"];g.map({"/":{component:m["default"]},"/rank":{component:f["default"]},"/auth":{component:h["default"]},"/signup":{component:x["default"]}}),g.start(i["default"],"app")},166:function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t["default"]={appid:"wxb3762a929cf9e070",appsecret:"0a607b7dc2ff4fa027b8594a99f9e086",route:{auth:"http://joywill.cc/admin/auth/",user:"http://120.25.227.156:7000/api/base/users/"}}},167:function(e,t,n){"use strict";function o(e){return e&&e.__esModule?e:{"default":e}}function a(e,t,n,o){var a="https://open.weixin.qq.com/connect/oauth2/authorize",s={appid:e,redirect_uri:t,response_type:"code",scope:o||"snsapi_base",state:n||""};return a+"?"+p.stringify(s)+"#wechat_redirect"}function s(e,t){localStorage.setItem("kf_accessToken",e),localStorage.setItem("kf_user",(0,l["default"])(t))}function r(e,t){var n=this;return new u["default"](function(o,a){n.$http.get("http://joywill.cc/admin/auth?appid="+e+"&code="+t).then(function(e){console.log(e);var t=e.userid,n=e.accessToken;o({userid:t,accessToken:n})})["catch"](function(e){a(e)})})}function i(e,t){var n=this;return new u["default"](function(o,a){n.$http.get("http://120.25.227.156:7000/api/base/users/"+e,{withCredentials:!0,headers:{Authorization:"Bearer "+t}}).then(function(e){console.log(e),o(e.data)})["catch"](function(e){a(e)})})}Object.defineProperty(t,"__esModule",{value:!0});var c=n(97),u=o(c),d=n(96),l=o(d),p=n(442);t["default"]={getAuthorizeURL:a,storeUserInfo:s,auth:r,getUserInfo:i}},168:function(e,t,n){"use strict";var o=n(146),a=n(212);e.exports={deep:!0,params:["loading"],paramWatchers:{loading:function(e,t){var n=this;e===!0?n.instance.showLoading():n.instance.hideLoading()}},bind:function(){var e=this;o.nextTick(function(){e.instance=a.init(e.el),e.params.loading===!0&&e.instance.showLoading();var t=new Event("resize");e.resizeEventHandler=function(){e.instance.resize()},e.el.addEventListener("resize",e.resizeEventHandler,!1),window.onresize=function(){e.el.dispatchEvent(t)}})},update:function(e,t){var n=this,a=e;o.nextTick(function(){n.instance.setOption(a)})},unbind:function(){var e=this;e.instance.dispose(),e.el.removeEventListener("resize",e.resizeEventHandler,!1)}}},169:function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t["default"]={data:function(){return{user:"咸蛋超人"}}}},170:function(e,t,n){"use strict";function o(e){return e&&e.__esModule?e:{"default":e}}Object.defineProperty(t,"__esModule",{value:!0});var a=n(97),s=o(a),r=n(175),i=o(r),c=n(96),u=o(c),d=n(166),l=o(d),p=n(167),f=o(p),v=n(147),h=n(98);t["default"]={data:function(){return{}},created:function(){var e=this;h(i["default"].mark(function t(){var n,o,a,s;return i["default"].wrap(function(t){for(;;)switch(t.prev=t.next){case 0:if(t.prev=0,n=v("?"),!localStorage.getItem("kf_accessToken")){t.next=6;break}e.$router.go("/auth?state=user"),t.next=23;break;case 6:if(!n||!n.code){t.next=20;break}return console.log("code"),t.next=10,e.auth(l["default"].appid,n.code);case 10:return o=t.sent,console.log("res",o),localStorage.setItem("kf_accessToken",o.accessToken),t.next=15,e.getUserInfo(o.userid,o.accessToken);case 15:a=t.sent,console.log("userInfo",a),0!=a.phone?(localStorage.setItem("kf_userInfo",(0,u["default"])(a)),e.$router.go("/profile")):(localStorage.setItem("kf_userInfo",(0,u["default"])(a)),e.$router.go("/signup")),t.next=23;break;case 20:s=f["default"].getAuthorizeURL(l["default"].appid,"http://joywill.cc/","wechat","snsapi_userinfo"),console.log(s),window.location.href=s;case 23:t.next=28;break;case 25:t.prev=25,t.t0=t["catch"](0),console.log(t.t0);case 28:case"end":return t.stop()}},t,this,[[0,25]])}))},methods:{auth:function(e,t){var n=this;return new s["default"](function(o,a){n.$http.get(l["default"].route.auth+"?appid="+e+"&code="+t).then(function(e){console.log(e);var t=e.body.userid,n=e.body.accessToken;o({userid:t,accessToken:n})})["catch"](function(e){a(e)})})},getUserInfo:function(e,t){var n=this;return new s["default"](function(o,a){n.$http.get(""+l["default"].route.user+e,{withCredentials:!0,headers:{Authorization:"Bearer "+t}}).then(function(e){console.log(e),o(e.body.data)})["catch"](function(e){a(e)})})}}}},171:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});n(147),n(98);t["default"]={data:function(){return{user:{}}},created:function(){this.user=localStorage.getItem("kf_userInfo")},methods:{}}},172:function(e,t,n){"use strict";function o(e){return e&&e.__esModule?e:{"default":e}}Object.defineProperty(t,"__esModule",{value:!0});var a=n(452),s=o(a);t["default"]={components:{vs:s["default"]},data:function(){return{users:[{nickname:"辛那克斯",keepdays:1,cont_keepdays:2,level:1,score:200,city:"xian",headimgurl:"http://cloudbean.qiniudn.com/hbg2-100x81-logo.png"},{nickname:"辛那克斯2",keepdays:1,cont_keepdays:2,level:1,score:200,city:"xian",headimgurl:"http://cloudbean.qiniudn.com/hbg2-100x81-logo.png"}]}}}},173:function(e,t,n){"use strict";function o(e){return e&&e.__esModule?e:{"default":e}}Object.defineProperty(t,"__esModule",{value:!0});var a=n(174),s=o(a);t["default"]={data:function(){return{}},methods:{signUp:function(){var e=this,t=this.phone,n=localStorage.getItem("kf_userInfo"),o=(0,s["default"])(n,{phone:t});this.$http.put(""+config.route.user+o._id,o,{withCredentials:!0,headers:{Authorization:"Bearer "+accessToken}}).then(function(t){localStorage.setItem("kf_userInfo",t.body),e.$router.go("/profile")})["catch"](function(e){console.log(e)})}}}},435:function(e,t){},436:function(e,t){},437:function(e,t){},438:function(e,t){},439:function(e,t){},445:function(e,t){e.exports=' <div id=app class=container> <nav class="navbar navbar-fixed-bottom navbar-light bg-faded"> <a class=navbar-brand href=#>Joy & Will</a> <a class="btn btn-default" v-link="{ path: \'/auth\'}">Profile</a> <a class="btn btn-default" v-link="{ path: \'/rank\'}">Rank</a> <a class="btn btn-default" v-link="{ path: \'/signup\'}">Signup</a> </nav> <div id=routerDiv> <router-view></router-view> </div> </div> '},446:function(e,t){e.exports=" loading.... "},447:function(e,t){e.exports=' <div class=login _v-4d53885a=""> <h1 _v-4d53885a="">补充你的信息</h1> <img src=xxxHTMLLINKxxx0.94776895913053230.6583937720713813xxx alt=headpic _v-4d53885a=""> <span class=info _v-4d53885a="">姓名</span> <input type=text placeholder=真实姓名 v-model=username _v-4d53885a=""> <input type=text placeholder=手机号 v-model=phone _v-4d53885a=""> <button class="btn btn-default" v-on:click=signUp _v-4d53885a="">login</button> </div> '},448:function(e,t){e.exports=' <div _v-6a845e04=""> <p _v-6a845e04="">login page. in the route /auth</p> user: {{user.displayName}} <div _v-6a845e04=""> </div> </div>'},449:function(e,t){e.exports=' <vs _v-7b602bc5=""></vs> <div class=card _v-7b602bc5=""> <div class=card-header _v-7b602bc5="">Rank</div> <div class=card-content _v-7b602bc5=""> <div class="list-block media-list" _v-7b602bc5=""> <ul _v-7b602bc5=""> <li class=item-content v-for="user in users" _v-7b602bc5=""> <div class=rank _v-7b602bc5=""> </div> <div class=item-media _v-7b602bc5=""> </div> <div class=item-inner _v-7b602bc5=""> <div class=item-title-row _v-7b602bc5=""> <div class=item-title _v-7b602bc5="">{{user.nickname}}</div> </div> <div class=item-subtitle _v-7b602bc5=""> Keep:{{user.keepdays}} | 连击:{{user.cont_keepdays}}</div> </div> <div class=like _v-7b602bc5=""> <i class="fa fa-heart fa-lg" _v-7b602bc5=""></i><br _v-7b602bc5=""> </div> </li> </ul> </div> </div> </div> '},450:function(e,t){e.exports=' <div class=vs _v-9440db94=""> {{user}} vs {{user}} </div> '},451:function(e,t,n){var o,a,s={};n(435),a=n(445),e.exports=o||{},e.exports.__esModule&&(e.exports=e.exports["default"]);var r="function"==typeof e.exports?e.exports.options||(e.exports.options={}):e.exports;a&&(r.template=a),r.computed||(r.computed={}),Object.keys(s).forEach(function(e){var t=s[e];r.computed[e]=function(){return t}})},452:function(e,t,n){var o,a,s={};n(439),o=n(169),a=n(450),e.exports=o||{},e.exports.__esModule&&(e.exports=e.exports["default"]);var r="function"==typeof e.exports?e.exports.options||(e.exports.options={}):e.exports;a&&(r.template=a),r.computed||(r.computed={}),Object.keys(s).forEach(function(e){var t=s[e];r.computed[e]=function(){return t}})},453:function(e,t,n){var o,a,s={};o=n(170),a=n(446),e.exports=o||{},e.exports.__esModule&&(e.exports=e.exports["default"]);var r="function"==typeof e.exports?e.exports.options||(e.exports.options={}):e.exports;a&&(r.template=a),r.computed||(r.computed={}),Object.keys(s).forEach(function(e){var t=s[e];r.computed[e]=function(){return t}})},454:function(e,t,n){var o,a,s={};n(437),o=n(171),a=n(448),e.exports=o||{},e.exports.__esModule&&(e.exports=e.exports["default"]);var r="function"==typeof e.exports?e.exports.options||(e.exports.options={}):e.exports;a&&(r.template=a),r.computed||(r.computed={}),Object.keys(s).forEach(function(e){var t=s[e];r.computed[e]=function(){return t}})},455:function(e,t,n){var o,a,s={};n(438),o=n(172),a=n(449),e.exports=o||{},e.exports.__esModule&&(e.exports=e.exports["default"]);var r="function"==typeof e.exports?e.exports.options||(e.exports.options={}):e.exports;a&&(r.template=a),r.computed||(r.computed={}),Object.keys(s).forEach(function(e){var t=s[e];r.computed[e]=function(){return t}})},456:function(e,t,n){var o,a,s={};n(436),o=n(173),a=n(447),e.exports=o||{},e.exports.__esModule&&(e.exports=e.exports["default"]);var r="function"==typeof e.exports?e.exports.options||(e.exports.options={}):e.exports;a&&(r.template=a),r.computed||(r.computed={}),Object.keys(s).forEach(function(e){var t=s[e];r.computed[e]=function(){return t}})}});